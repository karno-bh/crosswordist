import base64
import time
import compressed_seq


def test_compressed_bit_seq():
    # t = "gYAgK4EBSYGAICGBD0yB/iAvRIHAGoIfwBWBA0SB+BKBH0SBwBSBP0aB/B2BH0GB/gaBP0GB/AuBf0WB8A+BB0yB/hqCf/gJgQwRgR9IgfAgJoEfRIHAGYE/RYH8IDuBH0WB4CAqgQNCgf4HRIH4DYMP/AFBgYAD"
    # t = "ICyBAWArgfAiIg=="
    # t = "giCAA4EGAYlomDhACAIwYAQCjAwIWyIEQAITAapEAQKBBgKBAQGEBCCKCAGBVgGDD4ggAYYPgCIKEAwBgg8IA4kIAkJMAQFRQhACgwaDIgGBxAGBBAKCQBABiUYtIiTDAYYIGAKGIAJBHCAQAYLABQGDAYAQBIIDEQOLIIYmAQcjCYiAQBADhhSD+gUoJQGKIBwCQAaAJGAiFAGBQgGEAQUgJgGBgAGBQAGEAgwwgAGFIBAwAlIBhQQEcCWAAosFBgQBBDQgBAKocAKDASRAAoQogCIwAYqgAaAgBgtQOIBiAYKQAwGGEAiAMwggAYEKA4tMgLAIMAOLA4NOQQGFBSUIBYABi6QQA2QEICCDgSYCAoMCBKQBh1ABQIA0QAEBggQQAYIEyQGFCEgcSEEBgkBAAYEBAYIUEAGBIAGJoUAcQisBAYLIAodRQRwBcIAmAYIiCQGJaJQEkAgoCgb1AYJAIAKGAVCJoCCkAYIIQASECRBAAQGBgQGBQAGCBAgBgRQBhRwQCghLAYMQBoABgQIDiQqRFgZoImABhgGHQ5kEKeACCAGDCqMEAYFIAYKcgAGCcBEBiBAkEAQQcAWgAYRSkTRgAYNgGQIBi0iRthGjDhCJFjAQAYHUAYkEhDLgBCECgCIBhBFAFiABhTSIUhAQAYFAAYEgAYRBlUAKAYEEAYJcQAKECCBDBAGCAyABgQEBhMBiGE0BgwjCCQGBtAGBiAGGAcDkQgwIAoQBBrghAYGAAYMMIAQDgVEBggmEAYOYIAEChgoBRey3oAGBBgKBEQGCQAQBgUABgQ8ChGEJiEEBgYEBgRABgTQBgQEBhMACHEQBgyHJCAKDKAToAYTAEBIBAoJAAQWBWAGFIEAaBEUCgUEBgQEBggEQAYYghOgkggECgk5IAoFAAYc4ggFI4UKQAoROQAxQAYJAoAGJAQ0ExrRBKYAg"
    t = "gkeAAYGYAYoGGEBAKAMIKiBgAYJANAKDAiEDAYUJgiCARAGGEgQCgrAJAoggqhguGECPwAGFgIgITIEBgQgBgwEaAgOEBEJICAGEGAECDAGBYAGBhgGBBAGBBAGDCAyiAYGAAoMQIIABgghAAYUgAQZUQQKGIggagIaJAYEIAYVAiQEwCAGDUIAFBIgIoAWAIi6AIAGDQQgBAYHEAYEBAYKAQAGEEUCUgAGDGGAkAocEQAEhgxIVAY+ZIEwQEEDQBQggRSgBBIUCgRIBhBABBQUBiCBCATABBaAkAYQIgDCAAYpYSCogHECAIECgAoFABIJAAgGFQRAYIIUDgQQBgSADgkFiAYFAAoIEBASEDmMggAGEPiBAIAODQBAIAYGAAoMCHgQCgqAEAYJEEAKHIhBMYQIYAwGBJAGGs4pgATQkAYEEAYIEQAGBwASBCAGBQAOHUEAkFCABUQOBAQGEAoChAgGBBgGBCgGBJQGCAoAEgRAChiEQAYAQEAGGIChACRYQAYLACAOCgBgBgaICggIBBIECAYMBQCABgwFCCAGCBAIBhgEGAgGwQAGFjDBAQJABkBQBQFIQJAUgCBCgIUBGIBABigRA0BBIIICQoJABhQIwEQIKAYOCgAEDggL8AYICQAGDUAJAA4ERAYEQAYUQRAFAAgGOAUCAiAgIAgoJhEAQIgQCgSICgVADhAEIIAIBgQEChRAwJAUIAYFCAYIIJAGDghACAoEEAYECAYGAAYOQASgCgRoBggQEAYEUAYWQgSKoBAGBgAKBBAGBgAGMDYAQBQSAQRBAASQIAYIgBgWBAQGFBAQQDAQBhAQEAQEDiANQCAFXQANQAYQgFDEIAoUIAYAigAGHCAIIUCQkqAGJBDACCQwBBLoSAYLAhQGBAQKEgAgYIAGFQEBAEgQCggiQAYMClCA="
    bs = base64.b64decode(t)
    t0 = time.time()
    res = compressed_seq.bit_index_native(bs)
    d = time.time() - t0
    print(len(res), " ", d)

def test_compressed_bit_seq_op():
    t0 = "InWBAUSB+A=="
    t1 = "CII/4CAsgX9Igf4gJkKBgCAwgT9KgYARgQIZgQNCgeAUgT9BgfgZgQNFGoEBQgaBA0KB4A6BD0OB+BmBD0WB/hSBB0KB8AmBBBeBD0WB4CAlgT9PFoE/RoHwIDSBH0SBwCAogQFCgfAIgQdBgfwMgQICgX8D"
    bs0 = base64.b64decode(t0)
    bs1 = base64.b64decode(t1)
    res = compressed_seq.bit_and_op_index_native([bs0, bs1])
    print(res)

def main():
    # test_compressed_bit_seq()
    test_compressed_bit_seq_op()

if __name__ == '__main__':
    main()
